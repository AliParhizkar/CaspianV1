@page "/Demo/Customer"
@namespace Demo.Web.Pages
@inherits SimplePage<Customer>
@{
    base.BuildRenderTree(__builder);
}
<div style="width:90%;margin:5px auto">
    <table style="width:100%">
        <tr>
            <td>
                <label>نام خانوادگی</label>
            </td>
            <td>
                <StringTextBox @bind-Value="SearchData.LName" />
            </td>
            <td>
                <label>شرکت</label>
            </td>
            <td>
                <StringTextBox @bind-Value="SearchData.CompanyName" />
            </td>
        </tr>
    </table>
    <DataGrid @ref="CrudGrid" TEntity="Customer" Search="SearchData">
        <Columns Context="customer">
            <GridColumn TEntity="Customer" Field="@(t => t.CustomerType == CustomerType.Real ? t.FName + " " + t.LName : t.CompanyName)" />
            <GridColumn TEntity="Customer" Field="t => t.Gender.FaText()" style="width:100px">
                <Template>
                    @if (customer.Data.Gender == Gender.Male)
                    {
                        <span class="c-icon fa fa-male"></span>
                    }
                    else if (customer.Data.Gender == Gender.Female)
                    {
                        <span class="c-icon fa fa-female"></span>
                    }
                </Template>
            </GridColumn>
            <GridCommandColumns TEntity="Customer" DisableDeleteFunc="t => t.Gender == Gender.Male" 
                DisableEditFunc="t => t.Gender == Gender.Female" />
        </Columns>
    </DataGrid>
    <Window @ref="UpsertWindow" Title="مشتری" Style="width:450px">
        <Content>
            <CaspianForm @ref="UpsertForm" Model="UpsertData">
                <CaspianValidationValidator ValidatorType="typeof(CustomerService)" />
                <table style="width:90%;margin:0 auto">
                    <tr>
                        <td>
                            <label>نوع مشتری</label>
                        </td>
                        <td>
                            <DropdownList @bind-Value="UpsertData.CustomerType" />
                        </td>
                    </tr>
                    @if (UpsertData.CustomerType == CustomerType.Real)
                    {
                        <tr>
                            <td>
                                <label>وضعیت</label>
                            </td>
                            <td>
                                <StringTextBox @bind-Value="UpsertData.FName" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>وضعیت</label>
                            </td>
                            <td>
                                <StringTextBox @bind-Value="UpsertData.LName" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>وضعیت</label>
                            </td>
                            <td>
                                <DropdownList @bind-Value="UpsertData.Gender" />
                            </td>
                        </tr>
                    }
                    else
                    {
                        <tr>
                            <td>
                                <label>نام شرکت</label>
                            </td>
                            <td>
                                <StringTextBox @bind-Value="UpsertData.CompanyName" />
                            </td>
                        </tr>
                    }
                    <tr>
                        <td>
                            <label>شماره مشتری</label>
                        </td>
                        <td>
                            <NumericTextBox @bind-Value="UpsertData.CustomerNumber" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>شماره همراه</label>
                        </td>
                        <td>
                            <StringTextBox @bind-Value="UpsertData.MobileNumber" Style="direction:ltr" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>شماره تلفن</label>
                        </td>
                        <td>
                            <StringTextBox @bind-Value="UpsertData.Tel" Style="direction:ltr" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <FormCommandButton />
                        </td>
                    </tr>
                </table>
            </CaspianForm>
        </Content>
    </Window>
</div>

@code
{

}
