@page "/Engine/UserMembership/{MasterId:int}"
@namespace Caspian.Engine.UserManagement
@inherits AccessPage<Role, UserMembership, User>
@{
    base.BuildRenderTree(__builder);
}
<div style="width:95%;margin:10px auto">
    <table style="width:100%">
        <tr>
            <td>
                <fieldset class="c-search-container">
                    <legend>پارامترهای جستجو</legend>
                </fieldset>
                <table style="width:100%">
                    <tr>
                        <td>
                            <label>نام خانوادگی</label>
                        </td>
                        <td>
                            <StringTextBox @bind-Value="MemberSearch.FName" Search @onchange="() => { MemberGrid.EnableLoading(); }" />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <label>نام کاربری</label>
                        </td>
                        <td>
                            <StringTextBox @bind-Value="MemberSearch.UserName" Style="direction:ltr" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <hr />
                        </td>
                    </tr>
                    <tr>
                        <td style="text-align: center; color: #4f9995;font-weight:bold" colspan="2">
                            <label>کاربرانی که عضو نیستند</label>
                        </td>
                    </tr>
                </table>
                <DataGrid @ref="MemberGrid" TEntity="User" HideInsertIcon Search="MemberSearch" TableHeight="350">
                    <Columns>
                        <GridColumn TEntity="User" Field="@(t => t.FName + " " + t.LName )" Title="کاربر" />
                        <GridColumn TEntity="User" Field="t => t.UserName" style="width:100px" />
                        <GridColumn TEntity="User" Field="t => t.MobileNumber" style="width:100px" />
                    </Columns>
                </DataGrid>
            </td>
            <td style="width:85px;text-align:center">
                <CaspianForm @ref="UpsertForm" Model="UpsertData">
                    <CaspianValidationValidator ValidatorType="typeof(UserMembershipService)" />
                    <div style="padding-top:100px;">
                        <div style="padding-bottom:15px">
                            <IconButton IconType="IconType.AngleDoubleLeft" />
                        </div>
                        <IconButton type="button"
                                    @onclick="async () =>
                                              {
                                                  BlockUI();
                                                  await base.Delete();
                                                  UnblockUI();
                                              }" IconType="IconType.AngleDoubleRight" />
                    </div>
                </CaspianForm>
            </td>
            <td>
                <fieldset class="c-search-container">
                    <legend>پارامترهای جستجو</legend>
                    <table style="width:100%">
                        <tr>
                            <td>
                                <label>نام خانوادگی</label>
                            </td>
                            <td>
                                <StringTextBox @bind-Value="SearchData.User.LName" Search @onchange="() => { CrudGrid.EnableLoading(); }" />
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>نام کاربری</label>
                            </td>
                            <td>
                                <StringTextBox @bind-Value="SearchData.User.UserName" Style="direction:ltr" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <hr />
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: center; color: #4f9995;font-weight:bold" colspan="2">
                                <label>کاربرانی که عضو هستند</label>
                            </td>
                        </tr>
                    </table>
                </fieldset>
                <DataGrid @ref="CrudGrid" TEntity="UserMembership" HideInsertIcon Search="SearchData" TableHeight="350">
                    <Columns>
                        <GridColumn TEntity="UserMembership" Field="@(t => t.User.FName + " " + t.User.LName)" Title="کاربر" />
                        <GridColumn TEntity="UserMembership" Field="t => t.User.UserName" style="width:100px" />
                        <GridColumn TEntity="UserMembership" Field="t => t.User.MobileNumber" style="width:100px" />
                        <GridCommandColumns TEntity="UserMembership" HideEdit />
                    </Columns>
                </DataGrid>
            </td>
        </tr>
    </table>
</div>

@code 
{

}
